apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- serving-core-v0_24_0.yaml
- net-istio-v0_24_0.yaml
# - eventing-core-v0_22_0.yaml # Eventing is optional
- https://github.com/kubernetes-sigs/metrics-server/releases/download/v0.5.0/components.yaml # metrics server (needed for HPA)
- allow-all-ns-knative-authorization-policy.yaml
- peerauthentication.yaml
# - monitoring/

patchesStrategicMerge:
# patches
- patches/config-istio.yaml
- patches/config-logging.yaml
- patches/config-network.yaml
- patches/config-observability.yaml
- patches/domain-config.yaml
- patches/increase-deadline.yaml
- patches/enable-istio-injection.yaml
- patches/enable-sidecar-istio-controller.yaml

# removals
- removals/remove-knative-ingress-gateway.yaml
- removals/remove-knative-local-gateway.yaml




images:
- name: gcr.io/knative-releases/knative.dev/serving/cmd/activator
  newName: gcr.io/knative-releases/knative.dev/serving/cmd/activator
  digest: sha256:5eb340cfc804bd751fd9d10b982f39edbbc32fd99f1f88d933898c71051f62db
- name: gcr.io/knative-releases/knative.dev/serving/cmd/autoscaler
  newName: gcr.io/knative-releases/knative.dev/serving/cmd/autoscaler
  digest: sha256:689ec780d1147f81af9af79da2a2c4f264013bc2ee1badfe62082551095aad0c
- name: gcr.io/knative-releases/knative.dev/serving/cmd/domain-mapping
  newName: gcr.io/knative-releases/knative.dev/serving/cmd/domain-mapping
  digest: sha256:3855def96aab7b09bf336b3c2cd8d471ad9ffbd5fa932eda91629ec6e7a9e043
- name: gcr.io/knative-releases/knative.dev/serving/cmd/domain-mapping-webhook
  newName: gcr.io/knative-releases/knative.dev/serving/cmd/domain-mapping-webhook
  digest: sha256:33235c1d156bbe8aaa610e2c7d03c41e6df3dfbd5299707bbf3f8caaf9dd9cc8
- name: gcr.io/knative-releases/knative.dev/serving/cmd/webhook
  newName: gcr.io/knative-releases/knative.dev/serving/cmd/webhook
  digest: sha256:ca24ed95732deff82de40cc4c90503d7743467ffa0c770cf140b1448905b6843
- name: gcr.io/knative-releases/knative.dev/serving/cmd/controller
  newName: gcr.io/knative-releases/knative.dev/serving/cmd/controller
  digest: sha256:65485813159e3b9c0e8446d93431721309dadfb1404ca1dbf39f9fd9a1884ee3
- name: gcr.io/knative-releases/knative.dev/net-istio/cmd/controller
  newName: gcr.io/knative-releases/knative.dev/net-istio/cmd/controller
  digest: sha256:7fb4871bd91e6e864d5e310b4d29db7dc579306892f6421a725e384efb7565a1
- name: gcr.io/knative-releases/knative.dev/net-istio/cmd/webhook
  newName: gcr.io/knative-releases/knative.dev/net-istio/cmd/webhook
  digest: sha256:0ac507a6e1951c33518b0e8076a4c843ccc9fc818566cb0cd62f236a409820c4
- name: k8s.gcr.io/metrics-server/metrics-server
  newName: k8s.gcr.io/metrics-server/metrics-server
  newTag: v0.5.0
